create table users
(
    user_id  bigint auto_increment primary key,
    accounts varchar(30) not null
);
create table coupon
(
    coupon_id          bigint auto_increment primary key,
    coupon_name        varchar(50) not null,
    expiration_date    date        not null,
    issuable_quantity  int         not null, -- 발급 가능한 쿠폰 수량
    issued_quantity    int         not null, -- 발급된 쿠폰 수량
    remaining_quantity int         not null, -- 남은 쿠폰 수량
    discount_rate      decimal(5, 2)
);
create table map_user_coupon
(
    user_id            bigint not null,
    coupon_id          bigint not null,
    coupon_state       varchar(20) not null, -- active, used, expired
    coupon_name        varchar(50) not null,
    primary key (user_id, coupon_id)
);
create table orders
(
    order_id        bigint auto_increment primary key,
    user_id         bigint      not null,
    order_status    varchar(20) not null, -- completed, canceled
    total_amount    bigint      not null, -- 총 주문 금액
    discount_amount bigint      not null, -- 할인 금액
    paid_amount     bigint      not null, -- 결제 금액 (총 주문 금액에서 할인받은 금액)
    order_date      date        not null,
    update_date     date        not null,
    ordered_at      timestamp   not null,
    updated_at      timestamp   not null
);
create table order_item
(
    order_item_id  bigint auto_increment primary key,
    order_id       bigint       not null,
    user_id        bigint       not null,
    product_name   varchar(255) not null,
    product_amount bigint       not null,
    order_quantity int          not null,
    product_id     bigint       not null,
    order_date     date         not null,
    update_date    date         not null,
    ordered_at      timestamp   not null,
    updated_at      timestamp   not null,
    foreign key (order_id) references orders (order_id)
);
create table payment_history
(
    payment_history_id bigint auto_increment primary key,
    user_id            bigint      not null,
    amount             bigint      not null,
    discount_amount    bigint      not null,
    coupon_id          bigint,
    payment_status     varchar(20) not null, -- success, canceled
    order_date         date        not null,
    update_date        date        not null,
    ordered_at         timestamp   not null,
    updated_at         timestamp   not null
);
create table product
(
    product_id    bigint auto_increment primary key,
    name          varchar(255) not null,
    description   text         not null,
    category      varchar(20)  not null, --
    price         bigint       not null,
    created_at    timestamp    not null,
    updated_at    timestamp    not null,
    quantity      int          not null,
    product_state        varchar(20)  not null  -- available, sold_out
);
create table point
(
    point_id     bigint auto_increment primary key,
    balance      bigint not null,
    user_id      bigint not null
);
create table point_history
(
    point_history_id     bigint auto_increment primary key,
    user_id              bigint      not null,
    point_id             bigint      not null,
    amount               bigint      not null,
    transaction_type     varchar(20) not null, -- deposit, withdraw
    created_at           timestamp   not null,
    updated_at           timestamp   not null,
    foreign key (point_id) references point (point_id)
);

insert into users (user_id, accounts) values
                                          (1, 'user_alpha'),
                                          (2, 'user_beta');


-- product

insert into product (product_id, name, description, category, price, created_at, updated_at, quantity, product_state) values
                                                                                                                          (1, '아이폰 15', 'apple의 최신 스마트폰', 'electronics', 1500000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 100, 'available'),
                                                                                                                          (2, '갤럭시 s24', 'samsung의 프리미엄 스마트폰', 'electronics', 1400000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 100, 'available'),
                                                                                                                          (3, '맥북 프로', 'apple의 고성능 노트북', 'electronics', 3000000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 50, 'available'),
                                                                                                                          (4, '에어팟 프로', 'apple의 무선 이어폰', 'accessory', 350000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 200, 'available'),
                                                                                                                          (5, '게이밍 의자', '편안한 게이밍 의자', 'furniture', 250000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 30, 'available'),
                                                                                                                          (6, '닌텐도 스위치', '가정용 콘솔 게임기', 'game', 450000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 80, 'available'),
                                                                                                                          (7, '커피 머신', '프리미엄 커피 머신', 'kitchen', 500000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 40, 'available'),
                                                                                                                          (8, '공기청정기', '스마트 공기청정기', 'home', 300000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 70, 'available'),
                                                                                                                          (9, '무선 마우스', '로지텍 무선 마우스', 'accessory', 70000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 150, 'available'),
                                                                                                                          (10, '노트북 거치대', '알루미늄 거치대', 'accessory', 50000, '2025-07-01 09:00:00', '2025-07-01 09:00:00', 100, 'available');


-- orders

insert into orders (order_id, user_id, order_status, total_amount, discount_amount, paid_amount, order_date, update_date, ordered_at, updated_at) values
                                                                                                                                                      (1, 1, 'completed', 5050000, 505000, 4545000, '2025-07-09', '2025-07-09', '2025-07-09 10:00:00', '2025-07-09 10:30:00'),
                                                                                                                                                      (2, 1, 'completed', 11190000, 1119000, 10071000, '2025-07-02', '2025-07-02', '2025-07-02 10:00:00', '2025-07-02 10:30:00'),
                                                                                                                                                      (3, 1, 'completed', 13960000, 1396000, 12564000, '2025-07-05', '2025-07-05', '2025-07-05 10:00:00', '2025-07-05 10:30:00'),
                                                                                                                                                      (4, 1, 'completed', 17930000, 1793000, 16137000, '2025-07-03', '2025-07-03', '2025-07-03 10:00:00', '2025-07-03 10:30:00'),
                                                                                                                                                      (5, 1, 'completed', 20610000, 2061000, 18549000, '2025-07-06', '2025-07-06', '2025-07-06 10:00:00', '2025-07-06 10:30:00'),
                                                                                                                                                      (6, 1, 'completed', 22950000, 2295000, 20655000, '2025-07-10', '2025-07-10', '2025-07-10 10:00:00', '2025-07-10 10:30:00'),
                                                                                                                                                      (7, 1, 'completed', 2510000, 251000, 2259000, '2025-07-01', '2025-07-01', '2025-07-01 10:00:00', '2025-07-01 10:30:00'),
                                                                                                                                                      (8, 1, 'completed', 19950000, 1995000, 17955000, '2025-07-04', '2025-07-04', '2025-07-04 10:00:00', '2025-07-04 10:30:00'),
                                                                                                                                                      (9, 1, 'completed', 9650000, 965000, 8685000, '2025-07-07', '2025-07-07', '2025-07-07 10:00:00', '2025-07-07 10:30:00'),
                                                                                                                                                      (10, 1, 'completed', 12800000, 1280000, 11520000, '2025-07-08', '2025-07-08', '2025-07-08 10:00:00', '2025-07-08 10:30:00');


-- order_item
insert into order_item (order_id, user_id, product_name, product_amount, order_quantity, product_id, order_date, update_date, ordered_at, updated_at) values
                                                                                                                                                          (1, 1, '노트북 거치대', 50000, 3, 10, '2025-07-01', '2025-07-01', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (1, 1, '커피 머신', 500000, 4, 7, '2025-07-01', '2025-07-01', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (1, 1, '공기청정기', 300000, 5, 8, '2025-07-01', '2025-07-01', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (1, 1, '에어팟 프로', 350000, 4, 4, '2025-07-01', '2025-07-01', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (2, 1, '공기청정기', 300000, 5, 8, '2025-07-02', '2025-07-02', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (2, 1, '닌텐도 스위치', 450000, 2, 6, '2025-07-02', '2025-07-02', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (2, 1, '에어팟 프로', 350000, 3, 4, '2025-07-02', '2025-07-02', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (2, 1, '무선 마우스', 70000, 2, 9, '2025-07-02', '2025-07-02', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (2, 1, '아이폰 15', 1500000, 5, 1, '2025-07-02', '2025-07-02', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (2, 1, '노트북 거치대', 50000, 2, 10, '2025-07-02', '2025-07-02', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (3, 1, '커피 머신', 500000, 3, 7, '2025-07-03', '2025-07-03', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (3, 1, '무선 마우스', 70000, 3, 9, '2025-07-03', '2025-07-03', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (3, 1, '맥북 프로', 3000000, 2, 3, '2025-07-03', '2025-07-03', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (3, 1, '갤럭시 s24', 1400000, 4, 2, '2025-07-03', '2025-07-03', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (3, 1, '노트북 거치대', 50000, 3, 10, '2025-07-03', '2025-07-03', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (3, 1, '게이밍 의자', 250000, 2, 5, '2025-07-03', '2025-07-03', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '커피 머신', 500000, 4, 7, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '에어팟 프로', 350000, 5, 4, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '노트북 거치대', 50000, 4, 10, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '공기청정기', 300000, 3, 8, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '무선 마우스', 70000, 4, 9, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '갤럭시 s24', 1400000, 3, 2, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '닌텐도 스위치', 450000, 3, 6, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '아이폰 15', 1500000, 4, 1, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (4, 1, '게이밍 의자', 250000, 5, 5, '2025-07-04', '2025-07-04', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '공기청정기', 300000, 5, 8, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '아이폰 15', 1500000, 4, 1, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '닌텐도 스위치', 450000, 5, 6, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '갤럭시 s24', 1400000, 2, 2, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '게이밍 의자', 250000, 3, 5, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '맥북 프로', 3000000, 2, 3, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '노트북 거치대', 50000, 2, 10, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '무선 마우스', 70000, 3, 9, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (5, 1, '커피 머신', 500000, 2, 7, '2025-07-05', '2025-07-05', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (6, 1, '갤럭시 s24', 1400000, 5, 2, '2025-07-06', '2025-07-06', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (6, 1, '에어팟 프로', 350000, 5, 4, '2025-07-06', '2025-07-06', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (6, 1, '커피 머신', 500000, 4, 7, '2025-07-06', '2025-07-06', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (6, 1, '노트북 거치대', 50000, 4, 10, '2025-07-06', '2025-07-06', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (6, 1, '맥북 프로', 3000000, 4, 3, '2025-07-06', '2025-07-06', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (7, 1, '닌텐도 스위치', 450000, 2, 6, '2025-07-07', '2025-07-07', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (7, 1, '무선 마우스', 70000, 3, 9, '2025-07-07', '2025-07-07', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (7, 1, '에어팟 프로', 350000, 4, 4, '2025-07-07', '2025-07-07', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (8, 1, '커피 머신', 500000, 2, 7, '2025-07-08', '2025-07-08', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (8, 1, '노트북 거치대', 50000, 4, 10, '2025-07-08', '2025-07-08', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (8, 1, '맥북 프로', 3000000, 5, 3, '2025-07-08', '2025-07-08', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (8, 1, '닌텐도 스위치', 450000, 5, 6, '2025-07-08', '2025-07-08', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (8, 1, '공기청정기', 300000, 5, 8, '2025-07-08', '2025-07-08', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (9, 1, '게이밍 의자', 250000, 5, 5, '2025-07-09', '2025-07-09', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (9, 1, '닌텐도 스위치', 450000, 3, 6, '2025-07-09', '2025-07-09', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (9, 1, '맥북 프로', 3000000, 2, 3, '2025-07-09', '2025-07-09', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (9, 1, '에어팟 프로', 350000, 3, 4, '2025-07-09', '2025-07-09', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (10, 1, '에어팟 프로', 350000, 2, 4, '2025-07-10', '2025-07-10', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (10, 1, '갤럭시 s24', 1400000, 5, 2, '2025-07-10', '2025-07-10', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (10, 1, '무선 마우스', 70000, 5, 9, '2025-07-10', '2025-07-10', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (10, 1, '노트북 거치대', 50000, 5, 10, '2025-07-10', '2025-07-10', '2025-07-31 08:28:25', '2025-07-31 08:28:25'),
                                                                                                                                                          (10, 1, '아이폰 15', 1500000, 3, 1, '2025-07-10', '2025-07-10', '2025-07-31 08:28:25', '2025-07-31 08:28:25');

insert into orders (order_id, user_id, order_status, total_amount, discount_amount, paid_amount, order_date, update_date, ordered_at, updated_at) values
                                                                                                                                                      (11, 1, 'completed', 9150000, 915000, 8235000, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                      (12, 1, 'completed', 5200000, 520000, 4680000, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                      (13, 1, 'completed', 3710000, 371000, 3339000, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                      (14, 1, 'completed', 14180000, 1418000, 12762000, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                      (15, 1, 'completed', 12860000, 1286000, 11574000, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                      (16, 1, 'completed', 12550000, 1255000, 11295000, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00');

insert into order_item (order_id, user_id, product_name, product_amount, order_quantity, product_id, order_date, update_date, ordered_at, updated_at) values
                                                                                                                                                          (11, 1, '에어팟 프로', 350000, 2, 4, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (11, 1, '갤럭시 s24', 1400000, 4, 2, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (11, 1, '닌텐도 스위치', 450000, 3, 6, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (11, 1, '커피 머신', 500000, 3, 7, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (12, 1, '커피 머신', 500000, 3, 7, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (12, 1, '게이밍 의자', 250000, 2, 5, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (12, 1, '아이폰 15', 1500000, 2, 1, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (12, 1, '노트북 거치대', 50000, 4, 10, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (13, 1, '게이밍 의자', 250000, 2, 5, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (13, 1, '갤럭시 s24', 1400000, 2, 2, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (13, 1, '노트북 거치대', 50000, 4, 10, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (13, 1, '무선 마우스', 70000, 3, 9, '2025-07-30', '2025-07-30', '2025-07-30 11:00:00', '2025-07-30 11:30:00'),
                                                                                                                                                          (14, 1, '맥북 프로', 3000000, 4, 3, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (14, 1, '커피 머신', 500000, 2, 7, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (14, 1, '닌텐도 스위치', 450000, 2, 6, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (14, 1, '무선 마우스', 70000, 4, 9, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (15, 1, '커피 머신', 500000, 4, 7, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (15, 1, '게이밍 의자', 250000, 2, 5, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (15, 1, '맥북 프로', 3000000, 3, 3, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (15, 1, '에어팟 프로', 350000, 3, 4, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (15, 1, '노트북 거치대', 50000, 2, 10, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (15, 1, '무선 마우스', 70000, 3, 9, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (16, 1, '닌텐도 스위치', 450000, 3, 6, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (16, 1, '공기청정기', 300000, 4, 8, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (16, 1, '커피 머신', 500000, 2, 7, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00'),
                                                                                                                                                          (16, 1, '맥북 프로', 3000000, 3, 3, '2025-07-31', '2025-07-31', '2025-07-31 11:00:00', '2025-07-31 11:30:00');

